From ee4966734e08100e28558f3f4a199b7e5bdcfd73 Mon Sep 17 00:00:00 2001
From: GammaC0de <gammac0de@users.noreply.github.com>
Date: Tue, 23 Nov 2021 21:17:42 +0200
Subject: [PATCH 15/73] remove CatShareNet

---
 src/pyload/plugins/accounts/CatShareNet.py    | 70 -------------------
 src/pyload/plugins/downloaders/CatShareNet.py | 67 ------------------
 2 files changed, 137 deletions(-)
 delete mode 100644 src/pyload/plugins/accounts/CatShareNet.py
 delete mode 100644 src/pyload/plugins/downloaders/CatShareNet.py

diff --git a/src/pyload/plugins/accounts/CatShareNet.py b/src/pyload/plugins/accounts/CatShareNet.py
deleted file mode 100644
index 42739e073..000000000
--- a/src/pyload/plugins/accounts/CatShareNet.py
+++ /dev/null
@@ -1,70 +0,0 @@
-# -*- coding: utf-8 -*-
-
-import re
-import time
-from datetime import timedelta
-
-from ..base.account import BaseAccount
-
-
-class CatShareNet(BaseAccount):
-    __name__ = "CatShareNet"
-    __type__ = "account"
-    __version__ = "0.16"
-    __status__ = "testing"
-
-    __description__ = """Catshare.net account plugin"""
-    __license__ = "GPLv3"
-    __authors__ = [("prOq", None), ("GammaC0de", "nitzo2001[AT]yahoo[DOT]com")]
-
-    PREMIUM_PATTERN = r'<span class="hidden-xs">Premium</span>'
-    VALID_UNTIL_PATTERN = r'<span class="hidden-xs">Premium</span> <b>(.*?)</b>'
-    TRAFFIC_LEFT_PATTERN = r'<span class="hidden-xs">Premium</span>.*?\( (-?)(?P<S>[\d.,]+) (?P<U>[kMG]B) \)'
-
-    def grab_info(self, user, password, data):
-        premium = False
-        validuntil = -1
-        trafficleft = -1
-
-        html = self.load("http://catshare.net/")
-
-        if re.search(self.PREMIUM_PATTERN, html):
-            premium = True
-
-        m = re.search(self.VALID_UNTIL_PATTERN, html)
-        if m is not None:
-            m = re.findall(r"(\d+) (tydzień|dni|godzin)", m.group(1))
-            if m is not None:
-                validuntil = time.time()
-                for n, u in m:
-                    validuntil += (
-                        timedelta(hours=n).total_seconds()
-                        * {"tydzień": 168, "dni": 24, "godzin": 1}[u]
-                    )
-
-        m = re.search(self.TRAFFIC_LEFT_PATTERN, html)
-        if m is not None:
-            trafficleft = (
-                0 if m.group(1) else self.parse_traffic(m.group(2), m.group(3))
-            )
-
-        return {
-            "premium": premium,
-            "trafficleft": trafficleft,
-            "validuntil": validuntil,
-        }
-
-    def signin(self, user, password, data):
-        html = self.load("http://catshare.net/")
-
-        if re.search(r'/logout".*>Wyloguj</a>', html) is not None:
-            self.skip_login()
-
-        html = self.load(
-            "http://catshare.net/login",  # TODO: Revert to `https` in 0.6.x
-            post={"user_email": user, "user_password": password},
-            redirect=20,
-        )
-
-        if re.search(r'/logout".*>Wyloguj</a>', html) is None:
-            self.fail_login()
diff --git a/src/pyload/plugins/downloaders/CatShareNet.py b/src/pyload/plugins/downloaders/CatShareNet.py
deleted file mode 100644
index 9178e68df..000000000
--- a/src/pyload/plugins/downloaders/CatShareNet.py
+++ /dev/null
@@ -1,67 +0,0 @@
-# -*- coding: utf-8 -*-
-
-import re
-
-from ..anticaptchas.ReCaptcha import ReCaptcha
-from ..base.simple_downloader import SimpleDownloader
-
-
-class CatShareNet(SimpleDownloader):
-    __name__ = "CatShareNet"
-    __type__ = "downloader"
-    __version__ = "0.22"
-    __status__ = "testing"
-
-    __pattern__ = r"http://(?:www\.)?catshare\.net/\w{15,16}"
-    __config__ = [
-        ("enabled", "bool", "Activated", True),
-        ("use_premium", "bool", "Use premium account if available", True),
-        ("fallback", "bool", "Fallback to free download if premium fails", True),
-        ("chk_filesize", "bool", "Check file size", True),
-        ("max_wait", "int", "Reconnect if waiting time is greater than minutes", 10),
-    ]
-
-    __description__ = """CatShare.net downloader plugin"""
-    __license__ = "GPLv3"
-    __authors__ = [
-        ("z00nx", "z00nx0@gmail.com"),
-        ("prOq", None),
-        ("Walter Purcaro", "vuolter@gmail.com"),
-        ("GammaC0de", "nitzo2001[AT]yahoo[DOT]com"),
-    ]
-
-    NAME_PATTERN = r'(?:<div class="col-sm-8 col-xs-12 text-left">\s*<h3>|<title>)(?P<N>.+)(?:</h3>| \()'
-    SIZE_PATTERN = r'(?:<div class="col-sm-4 col-xs-12 text-right">\s*<h3>|<title>.+?\()(?P<S>[\d.,]+) (?P<U>[\w^_]+)(?:</h3>|\))'
-
-    OFFLINE_PATTERN = r'<div class="alert alert-error"'
-
-    IP_BLOCKED_PATTERN = r">Nasz serwis wykrył że Twój adres IP nie pochodzi z Polski.<"
-    WAIT_PATTERN = r"var\scount\s=\s(\d+);"
-
-    LINK_FREE_PATTERN = r'<form action="(.+?)" method="GET">'
-    LINK_PREMIUM_PATTERN = r'<form action="(.+?)" method="GET">'
-
-    def setup(self):
-        self.multi_dl = self.premium
-        self.resume_download = True
-
-    def handle_free(self, pyfile):
-        self.captcha = ReCaptcha(pyfile)
-
-        response, challenge = self.captcha.challenge()
-        self.data = self.load(
-            pyfile.url,
-            post={
-                "recaptcha_challenge_field": challenge,
-                "recaptcha_response_field": response,
-            },
-        )
-
-        m = re.search(self.LINK_FREE_PATTERN, self.data)
-        if m is not None:
-            self.link = m.group(1)
-
-    def handle_premium(self, pyfile):
-        m = re.search(self.LINK_FREE_PATTERN, self.data)
-        if m is not None:
-            self.link = m.group(1)
-- 
2.30.2

