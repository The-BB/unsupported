From e0895299957555c782e5d0395c0b5723770df0cb Mon Sep 17 00:00:00 2001
From: GammaC0de <gammac0de@users.noreply.github.com>
Date: Sun, 16 May 2021 23:28:55 +0300
Subject: [PATCH 056/150] [DebridItaliaCom] sync with stable

---
 src/pyload/plugins/accounts/DebridItaliaCom.py    | 8 ++++----
 src/pyload/plugins/downloaders/DebridItaliaCom.py | 8 ++++----
 2 files changed, 8 insertions(+), 8 deletions(-)

--- a/src/pyload/plugins/accounts/DebridItaliaCom.py
+++ b/src/pyload/plugins/accounts/DebridItaliaCom.py
@@ -26,17 +26,17 @@ class DebridItaliaCom(MultiAccount):
 
     API_URL = "https://debriditalia.com/api.php"
 
-    def api_response(self, method, **kwargs):
+    def api_request(self, method, **kwargs):
         kwargs[method] = ""
         return self.load(self.API_URL, get=kwargs)
 
     def grab_hosters(self, user, password, data):
-        return self.api_response("hosts").replace('"', "").split(",")
+        return self.api_request("hosts").replace('"', "").split(",")
 
     def grab_info(self, user, password, data):
         validuntil = None
 
-        html = self.api_response("check", u=user, p=password)
+        html = self.api_request("check", u=user, p=password)
 
         m = re.search(r"<expiration>(.+?)</expiration>", html)
         if m is not None:
@@ -48,7 +48,7 @@ class DebridItaliaCom(MultiAccount):
         return {"validuntil": validuntil, "trafficleft": -1, "premium": True}
 
     def signin(self, user, password, data):
-        html = self.api_response("check", u=user, p=password)
+        html = self.api_request("check", u=user, p=password)
 
         if "<status>valid</status>" not in html:
             self.fail_login()
--- a/src/pyload/plugins/downloaders/DebridItaliaCom.py
+++ b/src/pyload/plugins/downloaders/DebridItaliaCom.py
@@ -8,7 +8,7 @@ from ..base.multi_downloader import Mult
 class DebridItaliaCom(MultiDownloader):
     __name__ = "DebridItaliaCom"
     __type__ = "downloader"
-    __version__ = "0.25"
+    __version__ = "0.26"
     __status__ = "testing"
 
     __pattern__ = r"https?://(?:www\.|s\d+\.)?debriditalia\.com/dl/\d+"
@@ -31,14 +31,14 @@ class DebridItaliaCom(MultiDownloader):
 
     API_URL = "https://debriditalia.com/api.php"
 
-    def api_response(self, method, **kwargs):
+    def api_request(self, method, **kwargs):
         kwargs[method] = ""
         return self.load(self.API_URL, get=kwargs)
 
     def handle_premium(self, pyfile):
-        self.data = self.api_response(
+        self.data = self.api_request(
             "generate",
-            link=pyfile.url,
+            link=pyfile.url.replace("https://", "http://"),
             u=self.account.user,
             p=self.account.info["login"]["password"],
         )
