From cef8deb75db53767ac4e9f6ab5190e1d4abd1f18 Mon Sep 17 00:00:00 2001
From: GammaC0de <gammac0de@users.noreply.github.com>
Date: Mon, 15 Nov 2021 00:19:34 +0200
Subject: [PATCH 11/73] cosmetic changes

---
 src/pyload/core/network/xdcc/request.py | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

diff --git a/src/pyload/core/network/xdcc/request.py b/src/pyload/core/network/xdcc/request.py
index 83f0a38fe..61f18ebba 100644
--- a/src/pyload/core/network/xdcc/request.py
+++ b/src/pyload/core/network/xdcc/request.py
@@ -20,7 +20,7 @@ class XDCCRequest:
 
         self.filesize = 0
         self.received = 0
-        self.speeds = [0.0, 0.0, 0.0]
+        self.speeds = [0, 0, 0]
 
         self.sleep = 0.000
         self.last_recv_size = 0
@@ -112,7 +112,7 @@ class XDCCRequest:
 
         recv_list = [self.dccsock]
         self.dccsock.connect((ip, port))
-        self.dccsock.setblocking(0)
+        self.dccsock.setblocking(False)
 
         # recv loop for dcc socket
         while True:
@@ -127,7 +127,7 @@ class XDCCRequest:
                     data = self.dccsock.recv(16384)
 
                 except socket.error as exc:
-                    if exc.errno == errno.EAGAIN or exc.errno == errno.EWOULDBLOCK:
+                    if exc.errno in (errno.EAGAIN, errno.EWOULDBLOCK):
                         continue
 
                     else:
@@ -136,8 +136,7 @@ class XDCCRequest:
                 data_len = len(data)
                 if (
                     data_len == 0
-                    or self.filesize
-                    and self.received + data_len > self.filesize
+                    or self.received + data_len > self.filesize > 0
                 ):
                     break
 
-- 
2.30.2

