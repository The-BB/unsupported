From 885ebd1f4ffba26b8ca82720a45407362701814a Mon Sep 17 00:00:00 2001
From: GammaC0de <gammac0de@users.noreply.github.com>
Date: Thu, 13 May 2021 21:43:04 +0300
Subject: [PATCH 024/150] bugfix

---
 src/pyload/plugins/base/downloader.py | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

--- a/src/pyload/plugins/base/downloader.py
+++ b/src/pyload/plugins/base/downloader.py
@@ -354,12 +354,11 @@ class BaseDownloader(BaseHoster):
         :param read_size: size to read and scan
         :return: dictionary key of the first rule that matched
         """
-        dl_file = os.fsdecode(self.last_download)  # TODO: Recheck in 0.6.x
-
         if not self.last_download:
             self.log_warning(self._("No file to scan"))
             return
 
+        dl_file = os.fsdecode(self.last_download)  # TODO: Recheck in 0.6.x
         with open(dl_file, mode="rb") as fp:
             content = fp.read(read_size)
 
