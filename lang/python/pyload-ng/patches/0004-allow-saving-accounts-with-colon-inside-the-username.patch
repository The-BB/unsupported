From 97c58941d2acb10ff49df7aba37ea62426513b54 Mon Sep 17 00:00:00 2001
From: GammaC0de <gammac0de@users.noreply.github.com>
Date: Sat, 4 Jun 2022 22:51:46 +0300
Subject: [PATCH 04/25] allow saving accounts with colon inside the username or
 password

---
 src/pyload/core/managers/account_manager.py | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/src/pyload/core/managers/account_manager.py b/src/pyload/core/managers/account_manager.py
index 8cf7e8115..4abb59fc8 100644
--- a/src/pyload/core/managers/account_manager.py
+++ b/src/pyload/core/managers/account_manager.py
@@ -122,6 +122,8 @@ class AccountManager:
 
             elif ":" in line:
                 name, sep, pw = line.partition(":")
+                name = name.replace(r"\x3a", ":")
+                pw = pw.replace(r"\x3a", ":")
                 self.accounts[plugin][name] = {
                     "password": pw,
                     "options": {},
@@ -145,6 +147,8 @@ class AccountManager:
 
                     for name, data in accounts.items():
                         pw = data["password"]
+                        name = name.replace(":", r"\x3a")
+                        pw = pw.replace(":", r"\x3a")
                         fp.write(f"\n\t{name}:{pw}\n")
                         if data["options"]:
                             for option, values in data["options"].items():
-- 
2.30.2

