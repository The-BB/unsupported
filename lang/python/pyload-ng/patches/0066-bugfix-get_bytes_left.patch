From c8ce70be2024689fcacef03dddfc0a75d80290ca Mon Sep 17 00:00:00 2001
From: GammaC0de <gammac0de@users.noreply.github.com>
Date: Mon, 24 May 2021 00:19:46 +0300
Subject: [PATCH 066/150] bugfix get_bytes_left()

---
 src/pyload/core/datatypes/pyfile.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

--- a/src/pyload/core/datatypes/pyfile.py
+++ b/src/pyload/core/datatypes/pyfile.py
@@ -248,7 +248,7 @@ class PyFile:
         """
         try:
             return int(self.get_bytes_left() // self.get_speed())
-        except Exception:
+        except ZeroDivisionError:
             return 0
 
     def get_bytes_left(self):
@@ -256,7 +256,7 @@ class PyFile:
         gets bytes left.
         """
         try:
-            return self.plugin.req.size - self.plugin.req.arrived
+            return max(self.get_size() - self.plugin.req.arrived, 0)
         except Exception:
             return 0
 
