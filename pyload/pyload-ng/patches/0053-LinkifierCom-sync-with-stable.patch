From f07135f80061b3f10791f223f2dd2c1ecfb10213 Mon Sep 17 00:00:00 2001
From: GammaC0de <gammac0de@users.noreply.github.com>
Date: Sun, 16 May 2021 21:16:41 +0300
Subject: [PATCH 053/150] [LinkifierCom] sync with stable

---
 src/pyload/plugins/accounts/LinkifierCom.py    | 14 +++++++-------
 src/pyload/plugins/downloaders/LinkifierCom.py | 10 +++++-----
 2 files changed, 12 insertions(+), 12 deletions(-)

--- a/src/pyload/plugins/accounts/LinkifierCom.py
+++ b/src/pyload/plugins/accounts/LinkifierCom.py
@@ -11,7 +11,7 @@ from ..base.multi_account import MultiAc
 class LinkifierCom(MultiAccount):
     __name__ = "LinkifierCom"
     __type__ = "account"
-    __version__ = "0.01"
+    __version__ = "0.03"
     __status__ = "testing"
 
     __description__ = """Linkifier.com account plugin"""
@@ -27,7 +27,7 @@ class LinkifierCom(MultiAccount):
     API_KEY = "d046c4309bb7cabd19f49118a2ab25e0"
     API_URL = "https://api.linkifier.com/downloadapi.svc/"
 
-    def api_response(self, method, user, password, **kwargs):
+    def api_request(self, method, user, password, **kwargs):
         post = {
             "login": user,
             "md5Pass": hashlib.md5(password.encode()).hexdigest(),
@@ -44,7 +44,7 @@ class LinkifierCom(MultiAccount):
         return res
 
     def grab_hosters(self, user, password, data):
-        json_data = self.api_response("hosters", user, password)
+        json_data = self.api_request("hosters", user, password)
         if json_data["hasErrors"]:
             self.log_warning(json_data["ErrorMSG"] or "Unknown error")
             return []
@@ -56,20 +56,20 @@ class LinkifierCom(MultiAccount):
         ]
 
     def grab_info(self, user, password, data):
-        json_data = self.api_response("user", user, password)
+        json_data = self.api_request("user", user, password)
         trafficleft = json_data["extraTraffic"]
-        validuntil = float(json_data["expirydate"]) // 1000
+        validuntil = float(json_data["expirydate"]) / 1000
 
         return {
             "validuntil": validuntil,
             "trafficleft": -1
             if trafficleft.lower() == "unlimited"
-            else int(trafficleft),
+            else int(trafficleft) * 1024,
             "premium": True,
         }
 
     def signin(self, user, password, data):
-        json_data = self.api_response("user", user, password)
+        json_data = self.api_request("user", user, password)
         if json_data.get("hasErrors", True) or not json_data.get("isActive", True):
             self.log_warning(json_data["ErrorMSG"] or "Unknown error")
             self.fail_login()
--- a/src/pyload/plugins/downloaders/LinkifierCom.py
+++ b/src/pyload/plugins/downloaders/LinkifierCom.py
@@ -10,9 +10,9 @@ from ..base.multi_downloader import Mult
 
 
 class LinkifierCom(MultiDownloader):
-    __name__ = "AlldebridCom"
+    __name__ = "LinkifierCom"
     __type__ = "downloader"
-    __version__ = "0.02"
+    __version__ = "0.04"
     __status__ = "testing"
 
     __pattern__ = r"^unmatchable$"
@@ -32,7 +32,7 @@ class LinkifierCom(MultiDownloader):
     API_KEY = "d046c4309bb7cabd19f49118a2ab25e0"
     API_URL = "https://api.linkifier.com/downloadapi.svc/"
 
-    def api_response(self, method, user, password, **kwargs):
+    def api_request(self, method, user, password, **kwargs):
         post = {
             "login": user,
             "md5Pass": hashlib.md5(password.encode()).hexdigest(),
@@ -52,7 +52,7 @@ class LinkifierCom(MultiDownloader):
         self.multi_dl = True
 
     def handle_premium(self, pyfile):
-        json_data = self.api_response(
+        json_data = self.api_request(
             "stream",
             self.account.user,
             self.account.info["login"]["password"],
@@ -71,4 +71,4 @@ class LinkifierCom(MultiDownloader):
 
         self.resume_download = json_data["con_resume"]
         self.chunk_limit = json_data.get("con_max", 1) or 1
-        self.download(json_data["url"], fixurl=False)
+        self.url = json_data["url"]
