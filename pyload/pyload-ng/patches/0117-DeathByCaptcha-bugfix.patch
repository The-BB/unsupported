From e175af27213e6dfd5ccfb2a1ed4283f5e3233214 Mon Sep 17 00:00:00 2001
From: GammaC0de <gammac0de@users.noreply.github.com>
Date: Sat, 26 Jun 2021 23:25:07 +0300
Subject: [PATCH 117/150] [DeathByCaptcha] bugfix

---
 src/pyload/plugins/addons/DeathByCaptcha.py | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

--- a/src/pyload/plugins/addons/DeathByCaptcha.py
+++ b/src/pyload/plugins/addons/DeathByCaptcha.py
@@ -8,6 +8,7 @@ import time
 import pycurl
 from pyload.core.network.http.exceptions import BadHeader
 from pyload.core.network.request_factory import get_request
+from pyload.core.utils.convert import to_str
 
 from ..base.addon import BaseAddon, threaded
 
@@ -142,7 +143,7 @@ class DeathByCaptcha(BaseAddon):
             multipart = False
             with open(captcha, mode="rb") as fp:
                 data = fp.read()
-            data = "base64:" + base64.b64encode(data)
+            data = "base64:" + to_str(base64.b64encode(data))
 
         res = self.api_request("captcha", {"captchafile": data}, multipart)
 
